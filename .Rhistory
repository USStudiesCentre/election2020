getwd()
library(here)
library(tidyverse)
library(readxl)
ls(2)
polls <- read_xlsx(path=here::here("data/PrimaryPollsSince1980.xlsx"),sheet = 1)
dim(polls)
head(polls)
table(polls$contest)
table(poll$cycle)
table(polls$cycle)
table(polls$type)
table(polls$rep)
table(polls$candidate)
table(polls$candidateparty)
table(polls$state)
table(polls$cycle,polls$state)
polls <- polls %>%
mutate(st=state.abb[match(state,state.name)])
table(polls$st,polls$cycle)
class(polls$start_date)
polls <- polls %>%
mutate(st=state.abb[match(state,state.name)]) %>%
mutate(fieldDate = (start_date + end_date)/2)
?lubridate::ceiling_date
now()
lubridate::now()
library(lubridate)
?interval
polls <- read_xlsx(path=here::here("data/PrimaryPollsSince1980.xlsx"),sheet = 1)
polls <- polls %>%
mutate(st=state.abb[match(state,state.name)]) %>%
mutate(ex = interval(start_date,end_date),
mid_date = ex@start + (int_end(ex)-int_start(ex))/2)
iowa <- polls %>%
filter(st=="IA")
iowa %>% filter(cycle==2016)
iowa %>% filter(question==34)
polls %>% filter(question==34)
table(polls$type)
iowa %>% filter(year==2016)
iowa %>% filter(cycle==2016)
iowa %>% filter(cycle==2016) %>% unique(question)
iowa %>% filter(cycle==2016) %>% count(question)
